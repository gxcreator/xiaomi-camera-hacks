(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"150b":function(e,t,n){},c5ca:function(e,t,n){var r,a,i,s;n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("4160"),n("c975"),n("fb6a"),n("a434"),n("c19f"),n("ace4"),n("3410"),n("b64b"),n("131a"),n("d3b7"),n("ac1f"),n("5377"),n("25f0"),n("3ca3"),n("466d"),n("5319"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("2b3d");var o=n("7037");(function(n){"object"===o(t)&&"undefined"!==typeof e?e.exports=n():(a=[],r=n,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i))})((function(){return function(){function e(t,n,r){function a(o,l){if(!n[o]){if(!t[o]){var c="function"==typeof s&&s;if(!l&&c)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[o]={exports:{}};t[o][0].call(d.exports,(function(e){var n=t[o][1][e];return a(n||e)}),d,d.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof s&&s,o=0;o<r.length;o++)a(r[o]);return a}return e}()({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"===typeof e}function i(e){return"number"===typeof e}function s(e){return"object"===o(e)&&null!==e}function l(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,o,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],l(n))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(s(n))for(i=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,o=0;o<r;o++)c[o].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=l(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!a(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else if(n)while(n.length)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../events"),i=u(a),s=e("../event-handler"),l=u(s),c=e("../errors");function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==o(t)&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+o(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHING,i.default.BUFFER_APPENDING,i.default.BUFFER_RESET));return n.mediaSource=null,n.media=null,n.pendingTracks={},n.sourceBuffer={},n.segments=[],n.appended=0,n._msDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.browserType=0,-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&(n.browserType=1),n.mediaType="H264Raw",n}return h(t,e),r(t,[{key:"destroy",value:function(){l.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(this.mediaType=e.mediaType,t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){}},{key:"onBufferAppending",value:function(e){this.segments?this.segments.push(e):this.segments=[e],this.doAppending()}},{key:"onMediaSourceClose",value:function(){console.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){console.log("media source ended")}},{key:"onSBUpdateEnd",value:function(e){1===this.browserType&&(this.mediaSource.endOfStream(),this.media.play()),this.appending=!1,this.doAppending(),this.updateMediaElementDuration()}},{key:"updateMediaElementDuration",value:function(){}},{key:"onMediaSourceOpen",value:function(){var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),"FMp4"===this.mediaType&&this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){this.createSourceBuffers({tracks:"video",mimeType:""}),this.pendingTracks={}}},{key:"onBufferReset",value:function(e){"H264Raw"===this.mediaType&&this.createSourceBuffers({tracks:"video",mimeType:e.mimeType})}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,n=this.mediaSource,r=void 0;r=""===e.mimeType?"video/mp4;codecs=avc1.420028":"video/mp4;codecs="+e.mimeType;try{var a=t["video"]=n.addSourceBuffer(r);a.addEventListener("updateend",this.onsbue),track.buffer=a}catch(s){}this.wfs.trigger(i.default.BUFFER_CREATED,{tracks:e}),this.media.play()}},{key:"appendMp4buffer",value:function(e){var t=this.wfs.mp4buffer;this.wfs.mp4buffer=new Uint8Array(t.byteLength+e.byteLength),this.wfs.mp4buffer.set(t),this.wfs.mp4buffer.set(e,t.byteLength)}},{key:"doAppending",value:function(){var e=this.wfs,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void console.log("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{t[r.type]&&(this.parent=r.parent,t[r.type].appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0)}catch(i){n.unshift(r);var a={type:c.ErrorTypes.MEDIA_ERROR};if(22===i.code)return this.segments=[],a.details=c.ErrorDetails.BUFFER_FULL_ERROR,void console.log("buffer full flag === true");if(this.appendError?this.appendError++:this.appendError=1,a.details=c.ErrorDetails.BUFFER_APPEND_ERROR,a.frag=this.fragCurrent,this.appendError>e.config.appendErrorMaxRetry)return n=[],void(a.fatal=!0);a.fatal=!1}}}}}]),t}(l.default);n.default=v},{"../errors":6,"../event-handler":7,"../events":8}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../events"),i=c(a),s=e("../event-handler"),l=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==o(t)&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+o(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){u(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.BUFFER_CREATED,i.default.FILE_PARSING_DATA,i.default.FILE_HEAD_LOADED,i.default.FILE_DATA_LOADED,i.default.WEBSOCKET_ATTACHED,i.default.FRAG_PARSING_DATA,i.default.FRAG_PARSING_INIT_SEGMENT));return n.fileStart=0,n.fileEnd=0,n.pendingAppending=0,n.mediaType=void 0,n}return f(t,e),r(t,[{key:"destroy",value:function(){l.default.prototype.destroy.call(this)}},{key:"onBufferCreated",value:function(e){this.mediaType=e.mediaType}},{key:"onFileHeadLoaded",value:function(e){}},{key:"onFileDataLoaded",value:function(e){}},{key:"onFileParsingData",value:function(e){}},{key:"onWebsocketAttached",value:function(e){this.wfs.trigger(i.default.BUFFER_APPENDING,{type:"video",data:e.payload,parent:"main"})}},{key:"onFragParsingInitSegment",value:function(e){var t,n,r=e.tracks;for(t in n=r.video,n&&(n.id=e.id),r){n=r[t];var a=n.initSegment;a&&(this.pendingAppending++,this.wfs.trigger(i.default.BUFFER_APPENDING,{type:t,data:a,parent:"main"}))}}},{key:"onFragParsingData",value:function(e){var t=this;e.type,[e.data1,e.data2].forEach((function(n){n&&(t.pendingAppending++,t.wfs.trigger(i.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main"}))}))}}]),t}(l.default);n.default=h},{"../event-handler":7,"../events":8}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../utils/logger");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t){i(this,e),this.data=t,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return r(e,[{key:"loadWord",value:function(){var e=this.data.byteLength-this.bytesAvailable,t=new Uint8Array(4),n=Math.min(4,this.bytesAvailable);if(0===n)throw new Error("no bytes available");t.set(this.data.subarray(e,e+n)),this.word=new DataView(t.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,n,r=8,a=8;for(t=0;t<e;t++)0!==a&&(n=this.readEG(),a=(r+n+256)%256),r=0===a?r:a}},{key:"readSPS",value:function(){var e,t,n,r,a,i,s,o=0,l=0,c=0,u=0,d=1;if(this.readUByte(),e=this.readUByte(),this.readBits(5),this.skipBits(3),this.readUByte(),this.skipUEG(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var f=this.readUEG();if(3===f&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(i=3!==f?8:12,s=0;s<i;s++)this.readBoolean()&&(s<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var h=this.readUEG();if(0===h)this.readUEG();else if(1===h)for(this.skipBits(1),this.skipEG(),this.skipEG(),t=this.readUEG(),s=0;s<t;s++)this.skipEG();if(this.skipUEG(),this.skipBits(1),n=this.readUEG(),r=this.readUEG(),a=this.readBits(1),0===a&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(o=this.readUEG(),l=this.readUEG(),c=this.readUEG(),u=this.readUEG()),this.readBoolean()&&this.readBoolean()){var v=void 0,p=this.readUByte();switch(p){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()];break}v&&(d=v[0]/v[1])}return{width:Math.ceil((16*(n+1)-2*o-2*l)*d),height:(2-a)*(r+1)*16-(a?2:4)*(c+u)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();n.default=s},{"../utils/logger":15}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../events"),i=h(a),s=e("./exp-golomb"),l=h(s),c=e("../event-handler"),u=h(c),d=e("../remux/mp4-remuxer"),f=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==o(t)&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+o(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.H264_DATA_PARSED));return r.config=r.wfs.config||n,r.wfs=e,r.id="main",r.keepParsing=!0,r.remuxer=new f.default(r.wfs,r.id,r.config),r.contiguous=!0,r.timeOffset=1,r.sn=0,r.TIMESCALE=9e4,r.timestamp=0,r.scaleFactor=r.TIMESCALE/1e3,r.H264_TIMEBASE=r.TIMESCALE/r.wfs.config.fps,r._avcTrack={container:"video/mp2t",type:"video",id:1,sequenceNumber:0,samples:[],len:0,nbNalu:0,dropped:0,count:0},r.browserType=0,-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&(r.browserType=1),r}return b(t,e),r(t,[{key:"destroy",value:function(){u.default.prototype.destroy.call(this)}},{key:"getTimestampM",value:function(){return this.timestamp+=this.H264_TIMEBASE,this.timestamp}},{key:"onH264DataParsed",value:function(e){this._parseAVCTrack(e.data),this.remuxer.pushVideo(0,this.sn,this._avcTrack,this.timeOffset,this.contiguous),this.sn+=1}},{key:"_parseAVCTrack",value:function(e){var t,n,r,a,s=this,o=this._avcTrack,c=o.samples,u=this._parseAVCNALu(e),d=[],f=!1,h=!1,v=0,p="",b=function(){if(d.length){if(!this.config.forceKeyFrameOnDiscontinuity||!0===h||o.sps&&(c.length||this.contiguous)){if(!0===this.wfs.config.paused&&!0===this.keepParsing&&(this.keepParsing=!1,console.log("wfs.js paused")),!1===this.wfs.config.paused&&0==this.keepParsing&&!0===h&&(this.keepParsing=!0,console.log("wfs.js resumed")),!0===this.keepParsing){var e=this.getTimestampM();n={units:{units:d,length:v},pts:e,dts:e,key:h},c.push(n),o.len+=v,o.nbNalu+=d.length}}else o.dropped++;d=[],v=0}}.bind(this);u.forEach((function(e){switch(e.type){case 1:r=!0,f&&(p+="NDR ");break;case 5:r=!0,f&&(p+="IDR "),h=!0;break;case 6:e.data=s.discardEPB(e.data),t=new l.default(e.data),t.readUByte();break;case 7:if(r=!1,f&&(p+="SPS "),!o.sps){t=new l.default(e.data);var n=t.readSPS();o.width=n.width,o.height=n.height,o.sps=[e.data],o.duration=0;var c=e.data.subarray(1,4),u="avc1.";for(a=0;a<3;a++){var g=c[a].toString(16);g.length<2&&(g="0"+g),u+=g}o.codec=u,s.wfs.trigger(i.default.BUFFER_RESET,{mimeType:o.codec}),r=!0}break;case 8:r=!1,f&&(p+="PPS "),o.pps||(o.pps=[e.data],r=!0);break;case 9:r=!1,f&&(p+="AUD "),b();break;default:r=!1,p+="unknown NAL "+e.type+" ";break}r&&(d.push(e),v+=e.data.byteLength)})),(f||p.length)&&logger.log(p),b()}},{key:"_parseAVCNALu",value:function(e){var t,n,r,a,i,s=0,o=e.byteLength,l=0,c=[];while(s<o)switch(t=e[s++],l){case 0:0===t&&(l=1);break;case 1:l=0===t?2:0;break;case 2:case 3:0===t?l=3:1===t&&s<o?(r=31&e[s],a&&(n={data:e.subarray(a,s-l-1),type:i},c.push(n)),a=s,i=r,l=0):l=0;break;default:break}return a&&(n={data:e.subarray(a,o),type:i,state:l},c.push(n)),c}},{key:"discardEPB",value:function(e){var t,n,r=e.byteLength,a=[],i=1;while(i<r-2)0===e[i]&&0===e[i+1]&&3===e[i+2]?(a.push(i+2),i+=2):i++;if(0===a.length)return e;t=r-a.length,n=new Uint8Array(t);var s=0;for(i=0;i<t;s++,i++)s===a[0]&&(s++,a.shift()),n[i]=e[s];return n}}]),t}(u.default);n.default=g},{"../event-handler":7,"../events":8,"../remux/mp4-remuxer":13,"./exp-golomb":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"},n.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException"}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./events");s(i);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t){l(this,e),this.wfs=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return a(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===r(this.handledEvents)&&this.handledEvents.length&&"function"===typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.wfs.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.wfs.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var n=function(e,t){var n="on"+e.replace("wfs","");return this[n],this[n].bind(this,t)};try{n.call(this,e,t).call()}catch(r){console.log("internal error happened while processing "+e+":"+r.message)}}}]),e}();n.default=c},{"./events":8}],8:[function(e,t,n){"use strict";t.exports={MEDIA_ATTACHING:"wfsMediaAttaching",FRAG_LOADING:"wfsFragLoading",BUFFER_CREATED:"wfsBufferCreated",BUFFER_APPENDING:"wfsBufferAppending",BUFFER_RESET:"wfsBufferReset",FRAG_PARSING_DATA:"wfsFragParsingData",FRAG_PARSING_INIT_SEGMENT:"wfsFragParsingInitSegment",H264_DATA_PARSING:"wfsH264DataParsing",H264_DATA_PARSED:"wfsH264DataParsed",WEBSOCKET_ATTACHED:"wfsWebsocketAttached",FILE_HEAD_LOADING:"wfsFileHeadLoading",FILE_HEAD_LOADED:"wfsFileHeadLoaded",FILE_DATA_LOADING:"wfsFileDataLoading",FILE_DATA_LOADED:"wfsFileDataLoaded",FILE_PARSING_DATA:"wfsFileParsingData"}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){a(this,e)}return r(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();n.default=i},{}],10:[function(e,t,n){"use strict";t.exports=e("./wfs.js").default},{"./wfs.js":18}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../events"),i=d(a),s=e("../event-handler"),l=d(s),c=e("../utils/h264-nal-slicesreader.js"),u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==o(t)&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+o(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(e){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.wfs=e,n.buf=null,n.slicesReader=new u.default(e),n}return v(t,e),r(t,[{key:"destroy",value:function(){this.slicesReader.destroy(),l.default.prototype.destroy.call(this)}},{key:"receiveSocketMessage",value:function(e){this.buf=new Uint8Array(e);var t=new Uint8Array(this.buf);"FMp4"===this.wfs.mediaType&&this.wfs.trigger(i.default.WEBSOCKET_ATTACHED,{payload:t}),"H264Raw"===this.wfs.mediaType&&this.wfs.trigger(i.default.H264_DATA_PARSING,{data:t})}}]),t}(l.default);n.default=p},{"../event-handler":7,"../events":8,"../utils/h264-nal-slicesreader.js":14}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){a(this,e)}return r(e,null,[{key:"init",value:function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))}},{key:"box",value:function(e){var t,n=Array.prototype.slice.call(arguments,1),r=8,a=n.length,i=a;while(a--)r+=n[a].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),a=0,r=8;a<i;a++)t.set(n[a],r),r+=n[a].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){return n*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t){var n=t.length,r=[];while(n--)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){var n=t.length,r=[];while(n--)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){n=0;var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,r)}},{key:"sdtp",value:function(t){var n,r,a=t.samples||[],i=new Uint8Array(4+a.length);for(r=0;r<a.length;r++)n=a[r].flags,i[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,i)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n,r,a,i=[],s=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],a=r.byteLength,i.push(a>>>8&255),i.push(255&a),i=i.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)r=t.pps[n],a=r.byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(r));var o=e.box(e.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(s))),l=t.width,c=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,106,101,102,102,45,121,97,110,47,47,47,103,119,102,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration*t.timescale,a=t.width,i=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,i>>8&255,255&i,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),a=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.trun(t,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r,a,i,s,o,l,c=t.samples||[],u=c.length,d=12+16*u,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<u;r++)a=c[r],i=a.duration,s=a.size,o=a.flags,l=a.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n}}]),e}();n.default=i},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../helper/aac"),i=f(a),s=e("../events"),o=f(s),l=e("../utils/logger"),c=e("../remux/mp4-generator"),u=f(c),d=e("../errors");function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e("../utils/polyfill");var v=function(){function e(t,n,r){h(this,e),this.observer=t,this.id=n,this.config=r,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR,this.nextAvcDts=90300,this.H264_TIMEBASE=this.PES_TIMESCALE/this.observer.config.fps}return r(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"pushVideo",value:function(e,t,n,r,a){this.level=e,this.sn=t;this.ISGenerated||this.generateVideoIS(n,r),this.ISGenerated&&n.samples.length&&this.remuxVideo_2(n,r,a)}},{key:"remuxVideo_2",value:function(e,t,n,r){var a,i,s=8,c=(this.PES_TIMESCALE,this.PES2MP4SCALEFACTOR,e.samples),d=[];a=new Uint8Array(e.len+4*e.nbNalu+8);var f=new DataView(a.buffer);f.setUint32(0,a.byteLength),a.set(u.default.types.mdat,4);for(var h=0,v=void 0,p=void 0,b=void 0,g=0;g<c.length;g++){var y=c[g],m=0;while(y.units.units.length){var k=y.units.units.shift();f.setUint32(s,k.data.byteLength),s+=4,a.set(k.data,s),s+=k.data.byteLength,m+=4+k.data.byteLength}var w=y.pts-this._initPTS,S=y.dts-this._initDTS;if(S=Math.min(w,S),void 0!==b)v=this._PTSNormalize(w,b),p=this._PTSNormalize(S,b),h=p-b,h<=0&&(l.logger.log("invalid sample duration at PTS/DTS: "+y.pts+"/"+y.dts+"|dts norm: "+p+"|lastDTS: "+b+":"+h),h=1);else{var _,E=this.nextAvcDts;v=this._PTSNormalize(w,E),p=this._PTSNormalize(S,E),E&&(_=Math.round(p-E),Math.abs(_)<600&&_&&(_>1?l.logger.log("AVC:"+_+" ms hole between fragments detected,filling it"):_<-1&&l.logger.log("AVC:"+-_+" ms overlapping between fragments detected"),p=E,v=Math.max(v-_,p),l.logger.log("Video/PTS/DTS adjusted: "+v+"/"+p+",delta:"+_))),this.firstPTS=Math.max(0,v),this.firstDTS=Math.max(0,p),h=.03}d.push({size:m,duration:this.H264_TIMEBASE,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:y.key?2:1,isNonSync:y.key?0:1}}),b=p}var T=0;d.length>=2&&(T=d[d.length-2].duration,d[0].duration=T),this.nextAvcDts=p+T;var A=e.dropped;e.len=0,e.nbNalu=0,e.dropped=0,e.samples=d,i=u.default.moof(e.sequenceNumber++,p,e),e.samples=[];var C={id:this.id,level:this.level,sn:this.sn,data1:i,data2:a,startPTS:v,endPTS:v,startDTS:p,endDTS:p,type:"video",nb:d.length,dropped:A};return this.observer.trigger(o.default.FRAG_PARSING_DATA,C),C}},{key:"generateVideoIS",value:function(e,t){var n,r,a=this.observer,i=e.samples,s=(this.PES_TIMESCALE,{}),l={id:this.id,level:this.level,sn:this.sn,tracks:s,unique:!1},c=void 0===this._initPTS;c&&(n=r=1/0),e.sps&&e.pps&&i.length&&(e.timescale=9e4,s.video={container:"video/mp4",codec:e.codec,initSegment:u.default.initSegment([e]),metadata:{width:e.width,height:e.height}},c&&(n=Math.min(n,i[0].pts-this.H264_TIMEBASE),r=Math.min(r,i[0].dts-this.H264_TIMEBASE))),Object.keys(s).length?(a.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,l),this.ISGenerated=!0,c&&(this._initPTS=n,this._initDTS=r)):console.log("generateVideoIS ERROR==> ",d.ErrorTypes.MEDIA_ERROR)}},{key:"remux",value:function(e,t,n,r,a,i,s,l){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(n,r,s),this.ISGenerated)if(n.samples.length){var c=this.remuxAudio(n,s,l);if(r.samples.length){var u=void 0;c&&(u=c.endPTS-c.startPTS),this.remuxVideo(r,s,l,u)}}else{var d=void 0;r.samples.length&&(d=this.remuxVideo(r,s,l)),d&&n.codec&&this.remuxEmptyAudio(n,s,l,d)}a.samples.length&&this.remuxID3(a,s),i.samples.length&&this.remuxText(i,s),this.observer.trigger(o.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,n){var r,a,i=this.observer,s=e.samples,c=t.samples,f=this.PES_TIMESCALE,h={},v={id:this.id,level:this.level,sn:this.sn,tracks:h,unique:!1},p=void 0===this._initPTS;if(p&&(r=a=1/0),e.config&&s.length){if(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)){var b=function e(t,n){return n?e(n,t%n):t};e.timescale=e.audiosamplerate/b(e.audiosamplerate,1024)}l.logger.log("audio mp4 timescale :"+e.timescale),h.audio={container:"audio/mp4",codec:e.codec,initSegment:u.default.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(r=a=s[0].pts-f*n)}t.sps&&t.pps&&c.length&&(t.timescale=this.MP4_TIMESCALE,h.video={container:"video/mp4",codec:t.codec,initSegment:u.default.initSegment([t]),metadata:{width:t.width,height:t.height}},p&&(r=Math.min(r,c[0].pts-f*n),a=Math.min(a,c[0].dts-f*n))),Object.keys(h).length?(i.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,p&&(this._initPTS=r,this._initDTS=a)):i.trigger(o.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,id:this.id,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,n,r){var a,i,s,c,d,f,h,v=8,p=this.PES_TIMESCALE,b=this.PES2MP4SCALEFACTOR,g=e.samples,y=[],m=void 0;m=n?this.nextAvcDts:t*p;var k=g[0];d=Math.max(this._PTSNormalize(k.dts,m)-this._initDTS,0),c=Math.max(this._PTSNormalize(k.pts,m)-this._initDTS,0);var w=Math.round((d-m)/90);n&&w&&(w>1?l.logger.log("AVC:"+w+" ms hole between fragments detected,filling it"):w<-1&&l.logger.log("AVC:"+-w+" ms overlapping between fragments detected"),d=m,g[0].dts=d+this._initDTS,c=Math.max(c-w,m),g[0].pts=c+this._initDTS,l.logger.log("Video/PTS/DTS adjusted: "+c+"/"+d+",delta:"+w)),k=g[g.length-1],h=Math.max(this._PTSNormalize(k.dts,m)-this._initDTS,0),f=Math.max(this._PTSNormalize(k.pts,m)-this._initDTS,0),f=Math.max(f,h);var S=navigator.vendor,_=navigator.userAgent,E=S&&S.indexOf("Apple")>-1&&_&&!_.match("CriOS");E&&(a=Math.round((h-d)/(b*(g.length-1))));for(var T=0;T<g.length;T++){var A=g[T];E?A.dts=d+T*b*a:(A.dts=Math.max(this._PTSNormalize(A.dts,m)-this._initDTS,d),A.dts=Math.round(A.dts/b)*b),A.pts=Math.max(this._PTSNormalize(A.pts,m)-this._initDTS,A.dts),A.pts=Math.round(A.pts/b)*b}i=new Uint8Array(e.len+4*e.nbNalu+8);var C=new DataView(i.buffer);C.setUint32(0,i.byteLength),i.set(u.default.types.mdat,4);for(var O=0;O<g.length;O++){var x=g[O],L=0,P=void 0;while(x.units.units.length){var R=x.units.units.shift();C.setUint32(v,R.data.byteLength),v+=4,i.set(R.data,v),v+=R.data.byteLength,L+=4+R.data.byteLength}if(E)P=Math.max(0,a*Math.round((x.pts-x.dts)/(b*a)));else{if(O<g.length-1)a=g[O+1].dts-x.dts;else{var D=this.config,U=x.dts-g[O>0?O-1:O].dts;if(D.stretchShortVideoTrack){var M=D.maxBufferHole,j=D.maxSeekHole,I=Math.floor(Math.min(M,j)*p),N=(r?c+r*p:this.nextAacPts)-x.pts;N>I?(a=N-U,a<0&&(a=U),l.logger.log("It is approximately "+N/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=U}else a=U}a/=b,P=Math.round((x.pts-x.dts)/b)}y.push({size:L,duration:a,cts:P,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:x.key?2:1,isNonSync:x.key?0:1}})}this.nextAvcDts=h+a*b;var F=e.dropped;e.len=0,e.nbNalu=0,e.dropped=0,e.samples=y,s=u.default.moof(e.sequenceNumber++,d/b,e),e.samples=[];var B={id:this.id,level:this.level,sn:this.sn,data1:s,data2:i,startPTS:c/p,endPTS:(f+b*a)/p,startDTS:c/p,endDTS:(f+b*a)/p,type:"video",nb:y.length,dropped:F};return this.observer.trigger(o.default.FRAG_PARSING_DATA,B),B}},{key:"remuxAudio",value:function(e,t,n){var r,a,s,c,d,f,h,v,p,b,g,y,m,k=this.PES_TIMESCALE,w=e.timescale,S=k/w,_=1024*e.timescale/e.audiosamplerate,E=8,T=[],A=[];e.samples.sort((function(e,t){return e.pts-t.pts})),A=e.samples;for(var C=n?this.nextAacPts:t*k,O=this._PTSNormalize(A[0].pts-this._initPTS,C),x=_*S,L=O+x,P=1;P<A.length;){var R=A[P],D=this._PTSNormalize(R.pts-this._initPTS,C),U=D-L;if(U<-.5*x)l.logger.log("Dropping frame due to "+Math.abs(U/90)+" ms overlap."),A.splice(P,1),e.len-=R.unit.length;else if(U>.5*x){var M=Math.round(U/x);l.logger.log("Injecting "+M+" frame"+(M>1?"s":"")+" of missing audio due to "+Math.round(U/90)+" ms gap.");for(var j=0;j<M;j++){var I=A[P-1].pts+x,N=i.default.getSilentFrame(e.channelCount);N||(l.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),N=R.unit.slice(0)),A.splice(P,0,{unit:N,pts:I,dts:I}),e.len+=N.length,P+=1}L+=(M+1)*x,R.pts=A[P-1].pts+x,P+=1}else Math.abs(U)>.1*x&&l.logger.log("Invalid frame delta "+(D-L+x)+" at PTS "+Math.round(D/90)+" (should be "+x+")."),L+=x,R.pts=A[P-1].pts+x,P+=1}while(A.length){if(a=A.shift(),c=a.unit,b=a.pts-this._initDTS,g=a.dts-this._initDTS,void 0!==p)y=this._PTSNormalize(b,p),m=this._PTSNormalize(g,p),s.duration=(m-p)/S;else{y=this._PTSNormalize(b,C),m=this._PTSNormalize(g,C);var F=Math.round(1e3*(y-C)/k);if(n&&F){if(F>0)l.logger.log(F+" ms hole between AAC samples detected,filling it");else if(F<-12){l.logger.log(-F+" ms overlapping between AAC samples detected, drop frame"),e.len-=c.byteLength;continue}y=m=C}if(h=Math.max(0,y),v=Math.max(0,m),!(e.len>0))return;d=new Uint8Array(e.len+8),r=new DataView(d.buffer),r.setUint32(0,d.byteLength),d.set(u.default.types.mdat,4)}d.set(c,E),E+=c.byteLength,s={size:c.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(s),p=m}var B=0,V=T.length;if(V>=2&&(B=T[V-2].duration,s.duration=B),V){this.nextAacPts=y+S*B,e.len=0,e.samples=T,f=u.default.moof(e.sequenceNumber++,v/S,e),e.samples=[];var G={id:this.id,level:this.level,sn:this.sn,data1:f,data2:d,startPTS:h/k,endPTS:this.nextAacPts/k,startDTS:v/k,endDTS:(m+S*B)/k,type:"audio",nb:V};return this.observer.trigger(o.default.FRAG_PARSING_DATA,G),G}return null}},{key:"remuxEmptyAudio",value:function(e,t,n,r){var a=this.PES_TIMESCALE,s=e.timescale?e.timescale:e.audiosamplerate,o=a/s,c=r.startDTS*a+this._initDTS,u=r.endDTS*a+this._initDTS,d=1024,f=o*d,h=Math.ceil((u-c)/f),v=i.default.getSilentFrame(e.channelCount);if(v){for(var p=[],b=0;b<h;b++){var g=c+b*f;p.push({unit:v.slice(0),pts:g,dts:g}),e.len+=v.length}e.samples=p,this.remuxAudio(e,t,n)}else l.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var n,r=e.samples.length;if(r){for(var a=0;a<r;a++)n=e.samples[a],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE,n.dts=(n.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort((function(e,t){return e.pts-t.pts}));var n,r=e.samples.length;if(r){for(var a=0;a<r;a++)n=e.samples[a],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var n;if(void 0===t)return e;n=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=n;return e}},{key:"passthrough",get:function(){return!1}}]),e}();n.default=v},{"../errors":6,"../events":8,"../helper/aac":9,"../remux/mp4-generator":12,"../utils/logger":15,"../utils/polyfill":16}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../events"),i=d(a),s=e("../event-handler"),l=d(s),c=e("../demux/h264-demuxer"),u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==o(t)&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+o(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.H264_DATA_PARSING));return r.config=r.wfs.config||n,r.h264Demuxer=new u.default(e),r.wfs=e,r.lastBuf=null,r.nals=[],r}return v(t,e),r(t,[{key:"destroy",value:function(){this.lastBuf=null,this.nals=[],l.default.prototype.destroy.call(this)}},{key:"_read",value:function(e){var t=null;if(this.nals=[],e&&!(e.byteLength<1)){this.lastBuf?(t=new Uint8Array(e.byteLength+this.lastBuf.length),t.set(this.lastBuf),t.set(new Uint8Array(e),this.lastBuf.length)):t=new Uint8Array(e);for(var n=0,r=-1,a=-2,i=new Array,s=0;s<t.length;s+=2){var o=t[s],l=t[s+1];0==r&&0==o&&0==l?i.push(s-1):1==l&&0==o&&0==r&&0==a&&i.push(s-2),a=o,r=l}if(i.length>1)for(s=0;s<i.length-1;++s)this.nals.push(t.subarray(i[s],i[s+1]+1)),n=i[s+1];else n=i[0];if(0!=n&&n<t.length)this.lastBuf=t.subarray(n);else{this.lastBuf||(this.lastBuf=t);var c=new Uint8Array(this.lastBuf.length+e.byteLength);c.set(this.lastBuf),c.set(new Uint8Array(e),this.lastBuf.length),this.lastBuf=c}}}},{key:"onH264DataParsing",value:function(e){this._read(e.data);var t=this;this.nals.forEach((function(e){t.wfs.trigger(i.default.H264_DATA_PARSED,{data:e})}))}}]),t}(l.default);n.default=p},{"../demux/h264-demuxer":5,"../event-handler":7,"../events":8}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)};function a(){}var i={trace:a,debug:a,log:a,warn:a,info:a,error:a},s=i;function l(e,t){return t="["+e+"] > "+t,t}function c(e){var t=window.console[e];return t?function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];r[0]&&(r[0]=l(e,r[0])),t.apply(window.console,r)}:a}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){s[t]=e[t]?e[t].bind(e):c(t)}))}n.enableLogs=function(e){if(!0===e||"object"===("undefined"===typeof e?"undefined":r(e))){u(e,"debug","log","info","warn","error");try{s.log()}catch(t){s=i}}else s=i},n.logger=s},{}],16:[function(e,t,n){"use strict";"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);void 0===t&&(t=n.length);for(var r=new ArrayBuffer(t-e),a=new Uint8Array(r),i=0;i<a.length;i++)a[i]=n[i+e];return r})},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){a(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return r(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"loadHead",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay;var r=new XMLHttpRequest;r.open("head",e.url),r.onload=function(){n.onSuccess(r.getResponseHeader("content-length"))},r.send()}},{key:"load",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!==typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e.onloadend=this.loadend.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var n=this.stats;n.tfirst=0,n.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"loadend",value:function(e){var t=e.currentTarget,n=t.status,r=this.stats,a=this.context,i=this.config;if(!r.aborted)if(window.clearTimeout(this.requestTimeout),n>=200&&n<300){r.tload=Math.max(r.tfirst,performance.now());var s=void 0,o=void 0;"arraybuffer"===a.responseType?(s=t.response,o=s.byteLength):(s=t.responseText,o=s.length),r.loaded=r.total=o;var l={url:t.responseURL,data:s};this.callbacks.onSuccess(l,r,a)}else r.retry>=i.maxRetry||n>=400&&n<499?this.callbacks.onError({code:n,text:t.statusText},a):(this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,i.maxRetryDelay),r.retry++)}},{key:"loadtimeout",value:function(){this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;0===t.tfirst&&(t.tfirst=Math.max(performance.now(),t.trequest)),t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var n=this.callbacks.onProgress;n&&n(t,this.context,null)}}]),e}();n.default=i},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./events"),i=b(a),s=e("./controller/flow-controller"),o=b(s),l=e("./controller/buffer-controller"),c=b(l),u=e("events"),d=b(u),f=e("./utils/xhr-loader"),h=b(f),v=e("./loader/websocket-loader"),p=b(v);function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,e);var n=e.DefaultConfig;for(var r in n)r in t||(t[r]=n[r]);this.config=t;var a=this.observer=new d.default;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a),this.flowController=new o.default(this),this.bufferController=new c.default(this),this.websocketLoader=new p.default(this),this.mediaType=void 0}return r(e,null,[{key:"isSupported",value:function(){return window.MediaSource&&"function"===typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42c01f,mp4a.40.2"')}},{key:"version",get:function(){return"v.0.0.0.1"}},{key:"Events",get:function(){return i.default}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,debug:!1,fLoader:void 0,loader:h.default,fmp4FileUrl:"xxxx.mp4",fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,forceKeyFrameOnDiscontinuity:!0,appendErrorMaxRetry:3,fps:30,paused:!1}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),r(e,[{key:"destroy",value:function(){this.flowController.destroy(),this.bufferController.destroy(),this.websocketLoader.destroy()}},{key:"attachMedia",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"H264Raw";this.mediaType=t,this.media=e,this.trigger(i.default.MEDIA_ATTACHING,{media:e,mediaType:t}),this.mp4buffer=new Uint8Array}},{key:"receiveSocketMessage",value:function(e){this.websocketLoader.receiveSocketMessage(e)}}]),e}();n.default=y},{"./controller/buffer-controller":2,"./controller/flow-controller":3,"./events":8,"./loader/websocket-loader":11,"./utils/xhr-loader":17,events:1}]},{},[10])(10)}))},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},s=[],o={props:{source:String}},l=o,c=n("2877"),u=Object(c["a"])(l,i,s,!1,null,null,null),d=u.exports,f=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("root-template",[n("template",{slot:"toolbar-title"},[e._v(e._s(e.toolbarTitle))]),n("template",{slot:"content"},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"6","align-self":"center"}},[n("v-row",[n("v-col",[n("streaming-config",{on:{saved:e.refresh}})],1)],1),n("v-row",[n("v-col",[n("streaming-player",{ref:"streamingPlayerComponent"})],1)],1),n("v-row",[n("v-col",[n("hack-info",{staticClass:"fill-height",attrs:{hackIds:e.relatedHackIds}})],1)],1)],1)],1)],1)],1)],2)},v=[],p=n("d4ec"),b=n("bee2"),g=n("262e"),y=n("2caf"),m=n("9ab4"),k=n("60a3");(function(e){e["RTSPServer"]="rtsp-server",e["WebsocketStreamServer"]="websocket-stream-server",e["SSHServer"]="ssh-server"})(r||(r={}));var w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"}},[n("v-list-item",{attrs:{link:"",to:{name:"Dashboard"},exact:""}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-view-dashboard")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Dashboard")])],1)],1),n("v-list-item",{attrs:{link:"",to:{name:"StreamingDashboard"}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-video-wireless-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Video Streaming")])],1)],1),n("v-list-item",{attrs:{link:"",to:{name:"SshSftpDashboard"}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-console-network-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("SSH / SFTP Server")])],1)],1)],1)],1)],1),n("v-app-bar",{attrs:{app:"","clipped-left":""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._t("toolbar-title")],2)],1),n("v-content",[e._t("content")],2)],1)},S=[],_=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.drawer=!0,e}return n}(k["c"]);_=Object(m["a"])([k["a"]],_);var E=_,T=E,A=n("6544"),C=n.n(A),O=n("7496"),x=n("40dc"),L=n("5bc1"),P=n("a75b"),R=n("132d"),D=n("8860"),U=n("da13"),M=n("5d23"),j=n("1baa"),I=n("34c3"),N=n("f774"),F=n("2a7f"),B=Object(c["a"])(T,w,S,!1,null,null,null),V=B.exports;C()(B,{VApp:O["a"],VAppBar:x["a"],VAppBarNavIcon:L["a"],VContent:P["a"],VIcon:R["a"],VList:D["a"],VListItem:U["a"],VListItemContent:M["a"],VListItemGroup:j["a"],VListItemIcon:I["a"],VListItemTitle:M["b"],VNavigationDrawer:N["a"],VToolbarTitle:F["a"]});var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{loading:0!=e.isLoading}},[n("v-card-title",[e._v("Info")]),n("v-card-text",{domProps:{innerHTML:e._s(e.infoText)}})],1)},H=[],$=(n("4160"),n("159b"),n("bc3a")),z=n.n($),W=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.call(this),e.isLoading=0,e.infoText="",e}return Object(b["a"])(n,[{key:"mounted",value:function(){var e=this;this.hackIds.forEach((function(t){e.isLoading++,z.a.get("/api/hack/"+t+"/info").then((function(t){e.infoText+=t.data,e.isLoading--}))}))}}]),n}(k["c"]);Object(m["a"])([Object(k["b"])({required:!0})],W.prototype,"hackIds",void 0),W=Object(m["a"])([k["a"]],W);var q=W,K=q,Y=n("b0af"),Z=n("99d9"),X=Object(c["a"])(K,G,H,!1,null,null,null),J=X.exports;C()(X,{VCard:Y["a"],VCardText:Z["b"],VCardTitle:Z["c"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-snackbar",{attrs:{top:!0,timeout:1e4,color:e.snackbarColor,vertical:!0},model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[n("div",{staticClass:"font-weight-bold"},[e._v("Preview Player")]),n("div",[e._v(e._s(e.snackbarText))]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showSnackbar=!1}}},[e._v("Close")])],1),n("v-card",{attrs:{loading:e.isLoading}},[n("v-card-title",[e._v("Preview")]),n("v-card-text",[n("video",{ref:"videoPreview",staticStyle:{width:"100%",height:"250px"},attrs:{id:"videoPreview",controls:"",autoplay:"",muted:""},domProps:{muted:!0}}),n("v-overlay",{attrs:{opacity:e.overlayOpacity,absolute:!0,value:e.isLoading||e.showOverlay}},[e.isLoading?n("v-progress-circular",{attrs:{indeterminate:"",color:"secondary"}}):e._e(),e.showOverlay?n("v-container",[n("v-row",[n("v-col",{staticClass:"text-center"},[n("v-icon",{attrs:{size:"70"}},[e._v("mdi-video-off")])],1)],1),n("v-row",[n("v-col",[e._v(" "+e._s(e.overlayMessage)+" ")])],1)],1):e._e()],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn-toggle",{attrs:{rounded:"",color:"primary","background-color":"secondary"},on:{change:e.reload},model:{value:e.videoChannel,callback:function(t){e.videoChannel=t},expression:"videoChannel"}},[n("v-btn",{attrs:{disabled:e.isLoading,small:"",value:0}},[n("span",[e._v("Mainstream")])]),n("v-btn",{attrs:{disabled:e.isLoading,small:"",value:1}},[n("span",[e._v("Substream")])])],1)],1)],1)],1)},ee=[],te=(n("d3b7"),n("c5ca")),ne=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.call(this),e.isLoading=!1,e.videoChannel=1,e.mainstreamUri="",e.substreamUri="",e.snackbarColor="",e.showSnackbar=!1,e.snackbarText="",e.showOverlay=!1,e.overlayOpacity=.46,e.overlayMessage="",e}return Object(b["a"])(n,[{key:"reload",value:function(){var e=this;this.isLoading=!0,this.isWebsocketStreamEnabled().then((function(t){t?e.getCurrentVideoEncoding().then((function(t){"h264"===t?e.loadWebsocketStreamEndpoints().then((function(t){e.mainstreamUri=t.mainstream,e.substreamUri=t.substream,e.isLoading=!1,e.showOverlay=!1,e.overlayOpacity=.46,e.overlayMessage="",e.reloadPlayer()})):(e.isLoading=!1,e.showOverlay=!0,e.overlayOpacity=1,e.overlayMessage="Preview requires H264 encoding.")})):(e.isLoading=!1,e.showOverlay=!0,e.overlayOpacity=1,e.overlayMessage='Preview requires "Websocket Stream" to be enabled.')}))}},{key:"reloadPlayer",value:function(){var e=this;this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.close(),this.$nextTick((function(){var t=e.$refs.videoPreview;if(te.isSupported()){var n=new te({fps:30});e.websocket=new WebSocket(0===e.videoChannel?e.mainstreamUri:e.substreamUri),n.attachMedia(t,"H264Raw"),t.addEventListener("pause",(function(){n.config.paused=!0}),!0),t.addEventListener("play",(function(){n.config.paused=!1}),!0),e.websocket.onopen=function(){this.binaryType="arraybuffer"},e.websocket.onmessage=function(e){n.receiveSocketMessage(e.data)}}}))}},{key:"mounted",value:function(){this.reload()}},{key:"isWebsocketStreamEnabled",value:function(){var e=this;return new Promise((function(t){z.a.get("/api/hack/"+r.WebsocketStreamServer+"/config").then((function(e){t(e.data.enable)})).catch((function(){e.showSnackbarError("Error loading metadata.")}))}))}},{key:"getCurrentVideoEncoding",value:function(){var e=this;return new Promise((function(t){z.a.get("/api/hack/"+r.RTSPServer+"/config").then((function(e){t(e.data.encodingType)})).catch((function(){e.showSnackbarError("Error loading metadata.")}))}))}},{key:"loadWebsocketStreamEndpoints",value:function(){var e=this;return new Promise((function(t){z.a.get("/api/hack/"+r.WebsocketStreamServer+"/endpoints").then((function(e){t(e.data)})).catch((function(){e.showSnackbarError("Error loading metadata.")}))}))}},{key:"showSnackbarError",value:function(e){this.snackbarColor="error",this.snackbarText=e,this.showSnackbar=!0}}]),n}(k["c"]);ne=Object(m["a"])([k["a"]],ne);var re=ne,ae=re,ie=n("8336"),se=n("a609"),oe=n("62ad"),le=n("a523"),ce=n("a797"),ue=n("490a"),de=n("0fd9"),fe=n("2db4"),he=n("2fa4"),ve=Object(c["a"])(ae,Q,ee,!1,null,null,null),pe=ve.exports;C()(ve,{VBtn:ie["a"],VBtnToggle:se["a"],VCard:Y["a"],VCardActions:Z["a"],VCardText:Z["b"],VCardTitle:Z["c"],VCol:oe["a"],VContainer:le["a"],VIcon:R["a"],VOverlay:ce["a"],VProgressCircular:ue["a"],VRow:de["a"],VSnackbar:fe["a"],VSpacer:he["a"]});var be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-snackbar",{attrs:{top:!0,timeout:1e4,color:e.snackbarColor,vertical:!0},model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[n("div",{staticClass:"font-weight-bold"},[e._v("Configuration")]),n("div",[e._v(e._s(e.snackbarText))]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showSnackbar=!1}}},[e._v("Close")])],1),n("v-card",{attrs:{loading:e.isLoading,disabled:e.isLoading}},[n("v-card-title",[e._v("Configuration")]),n("v-card-text",[n("v-form",[n("v-switch",{attrs:{"hide-details":"",label:"Enable RTSP"},model:{value:e.rtspConfig.config.enable,callback:function(t){e.$set(e.rtspConfig.config,"enable",t)},expression:"rtspConfig.config.enable"}}),n("v-switch",{attrs:{"hide-details":"",label:"Enable Websocket Stream"},model:{value:e.websocketStreamConfig.config.enable,callback:function(t){e.$set(e.websocketStreamConfig.config,"enable",t)},expression:"websocketStreamConfig.config.enable"}}),n("v-radio-group",{attrs:{label:"Encoding Type"},model:{value:e.rtspConfig.config.encodingType,callback:function(t){e.$set(e.rtspConfig.config,"encodingType",t)},expression:"rtspConfig.config.encodingType"}},[n("v-radio",{attrs:{label:"H265 (HEVC)",value:"h265"}}),n("v-radio",{attrs:{label:"H264",value:"h264"}})],1)],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"success"},on:{click:e.saveConfig}},[e._v("Save")])],1)],1)],1)},ge=[],ye=(n("3ca3"),n("ddb0"),function(){function e(t){var n;Object(p["a"])(this,e),this.config={},this.entityConfig={},this.hackId=t.hackId,this.endpointSuffix=null!==(n=t.endpointSuffix)&&void 0!==n?n:"",t.TCreator&&(this.config=new t.TCreator),t.ECreator&&(this.ECreator=t.ECreator,this.entityConfig=new t.ECreator)}return Object(b["a"])(e,[{key:"loadConfig",value:function(){var e=this;return new Promise((function(t,n){z.a.get("/api/hack/"+e.hackId+"/config/"+e.endpointSuffix).then((function(n){e.config=n.data,t()})).catch((function(){n()}))}))}},{key:"saveConfig",value:function(){var e=this;return new Promise((function(t,n){z.a.post("/api/hack/"+e.hackId+"/config/"+e.endpointSuffix,e.config).then((function(){t()})).catch((function(){n()}))}))}},{key:"addEntity",value:function(){var e=this;return new Promise((function(t,n){z.a.post("/api/hack/"+e.hackId+"/config/"+e.endpointSuffix,e.entityConfig).then((function(){e.ECreator&&(e.entityConfig=new e.ECreator),t()})).catch((function(e){n(e.response.data)}))}))}},{key:"deleteEntity",value:function(e){var t=this;return new Promise((function(n,r){z.a.delete("/api/hack/"+t.hackId+"/config/"+t.endpointSuffix+"/"+e,t.entityConfig).then((function(){n()})).catch((function(){r()}))}))}}]),e}()),me=function e(){Object(p["a"])(this,e)},ke=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){return Object(p["a"])(this,n),t.call(this,{hackId:r.RTSPServer,TCreator:me})}return n}(ye),we=function e(){Object(p["a"])(this,e)},Se=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){return Object(p["a"])(this,n),t.call(this,{hackId:r.WebsocketStreamServer,TCreator:we})}return n}(ye),_e=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.call(this),e.isLoading=!1,e.snackbarText="",e.showSnackbar=!1,e.rtspConfig=new ke,e.websocketStreamConfig=new Se,e.snackbarColor="",e}return Object(b["a"])(n,[{key:"mounted",value:function(){var e=this,t=this.rtspConfig.loadConfig(),n=this.websocketStreamConfig.loadConfig();this.isLoading=!0,Promise.all([t,n]).then((function(){e.isLoading=!1})).catch((function(){e.snackbarText="Error loading configuration.",e.snackbarColor="error",e.showSnackbar=!0}))}},{key:"saveConfig",value:function(){var e=this,t=this.rtspConfig.saveConfig(),n=this.websocketStreamConfig.saveConfig();this.isLoading=!0,Promise.all([t,n]).then((function(){e.isLoading=!1,e.snackbarText="Saved with success!",e.snackbarColor="success",e.showSnackbar=!0,e.$emit("saved")})).catch((function(){e.snackbarText="Error saving configuration.",e.snackbarColor="error",e.showSnackbar=!0}))}}]),n}(k["c"]);_e=Object(m["a"])([k["a"]],_e);var Ee=_e,Te=Ee,Ae=n("4bd4"),Ce=n("67b6"),Oe=n("43a6"),xe=n("b73d"),Le=Object(c["a"])(Te,be,ge,!1,null,null,null),Pe=Le.exports;C()(Le,{VBtn:ie["a"],VCard:Y["a"],VCardActions:Z["a"],VCardText:Z["b"],VCardTitle:Z["c"],VForm:Ae["a"],VRadio:Ce["a"],VRadioGroup:Oe["a"],VSnackbar:fe["a"],VSwitch:xe["a"]});var Re=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.toolbarTitle="Video Streaming",e.relatedHackIds=[r.RTSPServer,r.WebsocketStreamServer],e}return Object(b["a"])(n,[{key:"refresh",value:function(){this.reloadPreview()}},{key:"reloadPreview",value:function(){var e=this;window.setTimeout((function(){e.$refs.streamingPlayerComponent.reload()}),1e3)}}]),n}(k["c"]);Re=Object(m["a"])([Object(k["a"])({components:{RootTemplate:V,StreamingConfig:Pe,HackInfo:J,StreamingPlayer:pe}})],Re);var De=Re,Ue=De,Me=Object(c["a"])(Ue,h,v,!1,null,null,null),je=Me.exports;C()(Me,{VCol:oe["a"],VContainer:le["a"],VRow:de["a"]});var Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("root-template",[n("template",{slot:"toolbar-title"},[e._v(e._s(e.toolbarTitle))]),n("template",{slot:"content"},[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"6","align-self":"center"}},[n("v-row",[n("v-col",[n("ssh-sftp-general-config")],1)],1),n("v-row",[n("v-col",[n("ssh-sftp-user-management")],1)],1)],1)],1)],1)],1)],2)},Ne=[],Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-snackbar",{attrs:{top:!0,timeout:1e4,color:e.snackbarColor,vertical:!0},model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[n("div",{staticClass:"font-weight-bold"},[e._v("Services")]),n("div",[e._v(e._s(e.snackbarMessage))]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showSnackbar=!1}}},[e._v("Close")])],1),n("v-card",{attrs:{loading:e.isLoading}},[n("v-card-title",[e._v("Services")]),n("v-card-text",e._l(e.serviceStatus,(function(t,r){return n("div",{key:r},[e._v(" "+e._s(t.name)+": "),n("v-chip",{staticClass:"ma-2",attrs:{small:"",color:t.color}},[e._v(e._s(t.description))])],1)})),0)],1)],1)},Be=[],Ve=(n("a4d3"),n("e01a"),n("b0c0"),n("4ec9"),n("3835")),Ge=n("b85c"),He=n("f684"),$e=n.n(He),ze=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(e,r,a){var i;return Object(p["a"])(this,n),i=t.call(this),i.name=e,i.description=r,i.color=a,i}return n}(k["c"]),We=function(){function e(){Object(p["a"])(this,e)}return Object(b["a"])(e,null,[{key:"make",value:function(t,n){var r=e.statusProperties[n];return new ze(t,r.description,r.color)}}]),e}();We.statusProperties={run:{description:"Running",color:"success"},down:{description:"Stopped",color:""},fail:{description:"Stopped",color:""},unknown:{description:"Unknown",color:"warning"}};var qe=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.call(this),e.serviceStatus={},e.isLoading=!1,e.showSnackbar=!1,e.snackbarMessage="",e.snackbarColor="",e.hackIds.forEach((function(t){return e.serviceStatus[t]=We.make(t,"unknown")})),e}return Object(b["a"])(n,[{key:"refresh",value:function(){var e=this,t=new Map;this.isLoading=!0,this.hackIds.forEach((function(e){t.set(e,z.a.get("/api/hack/"+e+"/service"))})),$e.a.props(t).then((function(t){var n,r=Object(Ge["a"])(t.entries());try{for(r.s();!(n=r.n()).done;){var a=Object(Ve["a"])(n.value,2),i=a[0],s=a[1];e.serviceStatus[i]=We.make(s.data.name,s.data.status)}}catch(o){r.e(o)}finally{r.f()}e.isLoading=!1})).catch((function(){e.snackbarMessage="An error occured while trying to fetch service status.",e.snackbarColor="error",e.showSnackbar=!0}))}},{key:"mounted",value:function(){this.refresh()}}]),n}(k["c"]);Object(m["a"])([Object(k["b"])({required:!0})],qe.prototype,"hackIds",void 0),qe=Object(m["a"])([k["a"]],qe);var Ke=qe,Ye=Ke,Ze=n("cc20"),Xe=Object(c["a"])(Ye,Fe,Be,!1,null,null,null),Je=Xe.exports;C()(Xe,{VBtn:ie["a"],VCard:Y["a"],VCardText:Z["b"],VCardTitle:Z["c"],VChip:Ze["a"],VSnackbar:fe["a"]});var Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-snackbar",{attrs:{top:!0,timeout:1e4,color:e.snackbarColor,vertical:!0},model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[n("div",{staticClass:"font-weight-bold"},[e._v("General Configuration")]),n("div",[e._v(e._s(e.snackbarText))]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showSnackbar=!1}}},[e._v("Close")])],1),n("p",{staticClass:"grey--text lighten-3"},[e._v("General Configuration")]),n("v-card",{attrs:{loading:e.isLoading,disabled:e.isLoading}},[n("v-card-text",[n("v-switch",{staticClass:"mt-0",attrs:{"hide-details":"",label:"Enable SSH / SFTP"},model:{value:e.sshConfig.config.enable,callback:function(t){e.$set(e.sshConfig.config,"enable",t)},expression:"sshConfig.config.enable"}})],1),n("v-card-actions",[n("v-btn",{attrs:{color:"success"},on:{click:e.saveConfig}},[e._v("Save")])],1)],1)],1)},et=[],tt=function e(){Object(p["a"])(this,e)},nt=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){return Object(p["a"])(this,n),t.call(this,{hackId:r.SSHServer,endpointSuffix:"general",TCreator:tt})}return n}(ye),rt=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.call(this),e.hackId=[r.SSHServer],e.isLoading=!1,e.snackbarText="",e.showSnackbar=!1,e.sshConfig=new nt,e.snackbarColor="",e}return Object(b["a"])(n,[{key:"mounted",value:function(){var e=this;this.isLoading=!0,this.sshConfig.loadConfig().then((function(){e.isLoading=!1})).catch((function(){e.snackbarText="Error loading configuration.",e.snackbarColor="error",e.showSnackbar=!0}))}},{key:"saveConfig",value:function(){var e=this;this.isLoading=!0,this.sshConfig.saveConfig().then((function(){e.isLoading=!1,e.snackbarText="Saved with success!",e.snackbarColor="success",e.showSnackbar=!0,e.$emit("saved")})).catch((function(){e.snackbarText="Error saving configuration.",e.snackbarColor="error",e.showSnackbar=!0}))}}]),n}(k["c"]);rt=Object(m["a"])([k["a"]],rt);var at=rt,it=at,st=Object(c["a"])(it,Qe,et,!1,null,null,null),ot=st.exports;C()(st,{VBtn:ie["a"],VCard:Y["a"],VCardActions:Z["a"],VCardText:Z["b"],VSnackbar:fe["a"],VSwitch:xe["a"]});var lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-snackbar",{attrs:{top:!0,timeout:1e4,color:e.snackbarColor,vertical:!0},model:{value:e.showSnackbar,callback:function(t){e.showSnackbar=t},expression:"showSnackbar"}},[n("div",{staticClass:"font-weight-bold"},[e._v("User Management")]),n("div",[e._v(e._s(e.snackbarText))]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.showSnackbar=!1}}},[e._v("Close")])],1),n("p",{staticClass:"grey--text lighten-3"},[e._v("User Management")]),n("v-data-table",{staticClass:"elevation-1 mt-5",attrs:{headers:e.userTableHeaders,items:e.sshUserConfig.config.users,"disable-pagination":!0,loading:e.isLoading,"hide-default-footer":"","no-data-text":"Nothing here, create a user to get started!"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",dense:""}},[n("v-spacer"),n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"primary",small:"",disabled:e.isLoading}},r),[e._v("New User")])]}}]),model:{value:e.showNewUserDialog,callback:function(t){e.showNewUserDialog=t},expression:"showNewUserDialog"}},[n("v-card",{attrs:{loading:e.isSaving}},[n("v-card-title",[e._v("New User")]),n("v-card-text",[n("v-text-field",{staticClass:"d-none",attrs:{label:"System Username"},model:{value:e.sshUserConfig.entityConfig.systemUsername,callback:function(t){e.$set(e.sshUserConfig.entityConfig,"systemUsername",t)},expression:"sshUserConfig.entityConfig.systemUsername"}}),n("v-text-field",{attrs:{autofocus:"",label:"Username",disabled:e.isSaving},model:{value:e.sshUserConfig.entityConfig.username,callback:function(t){e.$set(e.sshUserConfig.entityConfig,"username",t)},expression:"sshUserConfig.entityConfig.username"}}),n("v-text-field",{attrs:{label:"Password",type:"password",disabled:e.isSaving},model:{value:e.sshUserConfig.entityConfig.password,callback:function(t){e.$set(e.sshUserConfig.entityConfig,"password",t)},expression:"sshUserConfig.entityConfig.password"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",disabled:e.isSaving},on:{click:function(t){e.showNewUserDialog=!1}}},[e._v("Close")]),n("v-btn",{attrs:{color:"success",disabled:e.isSaving},on:{click:e.addUser}},[e._v("Create")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-icon",{on:{click:function(t){return e.deleteUser(r.username)}}},[e._v("mdi-delete")])]}}])})],1)},ct=[],ut=function e(){Object(p["a"])(this,e)},dt=function e(){Object(p["a"])(this,e),this.systemUsername="root"},ft=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){return Object(p["a"])(this,n),t.call(this,{hackId:r.SSHServer,endpointSuffix:"users",TCreator:ut,ECreator:dt})}return n}(ye),ht=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.call(this),e.hackId=[r.SSHServer],e.isLoading=!1,e.isSaving=!1,e.userTableHeaders=[{text:"Username",value:"username",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],e.users=[],e.snackbarText="",e.showSnackbar=!1,e.showNewUserDialog=!1,e.sshUserConfig=new ft,e.snackbarColor="",e}return Object(b["a"])(n,[{key:"mounted",value:function(){this.loadConfig()}},{key:"loadConfig",value:function(){var e=this;this.isLoading=!0,this.sshUserConfig.loadConfig().then((function(){e.isLoading=!1})).catch((function(){e.snackbarText="Error loading configuration.",e.snackbarColor="error",e.showSnackbar=!0}))}},{key:"addUser",value:function(){var e=this;this.isSaving=!0,this.sshUserConfig.addEntity().then((function(){e.isSaving=!1,e.snackbarText="User created with success!",e.snackbarColor="success",e.showSnackbar=!0,e.showNewUserDialog=!1,e.$emit("saved"),e.loadConfig()})).catch((function(t){e.isSaving=!1,e.snackbarText=t.message,e.snackbarColor="error",e.showSnackbar=!0}))}},{key:"deleteUser",value:function(e){var t=this;this.isLoading=!0,this.sshUserConfig.deleteEntity(e).then((function(){t.isLoading=!1,t.snackbarText="User deleted with success!",t.snackbarColor="success",t.showSnackbar=!0,t.showNewUserDialog=!1,t.$emit("saved"),t.loadConfig()})).catch((function(){t.snackbarText="Error deleting user.",t.snackbarColor="error",t.showSnackbar=!0}))}}]),n}(k["c"]);ht=Object(m["a"])([k["a"]],ht);var vt=ht,pt=vt,bt=n("8fea"),gt=n("169a"),yt=n("8654"),mt=n("71d9"),kt=Object(c["a"])(pt,lt,ct,!1,null,null,null),wt=kt.exports;C()(kt,{VBtn:ie["a"],VCard:Y["a"],VCardActions:Z["a"],VCardText:Z["b"],VCardTitle:Z["c"],VDataTable:bt["a"],VDialog:gt["a"],VIcon:R["a"],VSnackbar:fe["a"],VSpacer:he["a"],VTextField:yt["a"],VToolbar:mt["a"]});var St=function(e){Object(g["a"])(n,e);var t=Object(y["a"])(n);function n(){var e;return Object(p["a"])(this,n),e=t.apply(this,arguments),e.toolbarTitle="Video Streaming",e.hackId=[r.SSHServer],e}return n}(k["c"]);St=Object(m["a"])([Object(k["a"])({components:{RootTemplate:V,SshSftpGeneralConfig:ot,SshSftpUserManagement:wt,ServiceInfo:Je,HackInfo:J}})],St);var _t=St,Et=_t,Tt=Object(c["a"])(Et,Ie,Ne,!1,null,null,null),At=Tt.exports;C()(Tt,{VCol:oe["a"],VContainer:le["a"],VRow:de["a"]});var Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("root-template",[n("div",{attrs:{slot:"toolbar-title"},slot:"toolbar-title"},[e._v(e._s(e.toolbarTitle))]),n("div",{attrs:{slot:"content"},slot:"content"},[n("v-container",[n("p",[e._v("The dashboard is currently empty.")]),n("p",[e._v("Use the menu on the left to do things.")])])],1)])},Ot=[],xt={name:"Dashboard",data:function(){return{toolbarTitle:"Xiaomi Hacks"}},components:{RootTemplate:V}},Lt=xt,Pt=Object(c["a"])(Lt,Ct,Ot,!1,null,null,null),Rt=Pt.exports;C()(Pt,{VContainer:le["a"]}),a["a"].use(f["a"]);var Dt=[{path:"/",name:"Dashboard",component:Rt},{path:"/streaming",name:"StreamingDashboard",component:je},{path:"/ssh",name:"SshSftpDashboard",component:At}],Ut=new f["a"]({routes:Dt}),Mt=Ut,jt=n("f309");a["a"].use(jt["a"]);var It=new jt["a"]({theme:{dark:!0}});n("150b");a["a"].config.productionTip=!1,new a["a"]({router:Mt,vuetify:It,render:function(e){return e(d)}}).$mount("#app")}});
//# sourceMappingURL=app.df0de765.js.map